# Production Environment Configuration for WhatsApp RAG
# Copy this file to .env and configure with your production values

# =============================================================================
# API CONFIGURATION
# =============================================================================

# GitHub Token for API access (REQUIRED)
OPENAI_API_KEY=your_production_github_token_here
GITHUB_TOKEN=your_production_github_token_here

# Model Configuration
MODEL_NAME=gpt-4o-mini
OPENAI_API_BASE=https://models.inference.ai.azure.com
GH_MODELS_BASE_URL=https://models.github.ai/inference

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Server Configuration
HOST=0.0.0.0
PORT=7860
GRADIO_SERVER_NAME=0.0.0.0
GRADIO_SERVER_PORT=7860

# Security (REQUIRED for production)
GRADIO_USERNAME=admin
GRADIO_PASSWORD=your_secure_password_here

# Authentication message
GRADIO_AUTH_MESSAGE="Acceso restringido - Solo personal autorizado"

# Rate Limiting
MAX_REQUESTS_PER_MINUTE=30
MAX_CONCURRENT_REQUESTS=3
MAX_FILE_SIZE_MB=10

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Logging Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=WARNING
LOG_FORMAT=json

# Disable debug features
GRADIO_DEBUG=false
GRADIO_SHARE=false

# Metrics and Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics

# Performance monitoring
TRACK_QUERY_PERFORMANCE=true
TRACK_EMBEDDING_PERFORMANCE=true
LOG_INCLUDE_TRACE_ID=true

# =============================================================================
# PERFORMANCE AND CACHING
# =============================================================================

# Cache Configuration
ENABLE_CACHE=true
CACHE_TYPE=redis
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Redis Configuration (if using Redis cache)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Memory Management
MAX_WORKERS=4
CHUNK_PROCESSING_BATCH_SIZE=100
EMBEDDING_BATCH_SIZE=32
EMBEDDING_CACHE_SIZE=1000

# Garbage Collection
GC_THRESHOLD=1000

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Local Storage
DATA_DIRECTORY=/app/data
INDEX_DIRECTORY=/app/indices
CACHE_DIRECTORY=/app/cache

# S3 Configuration (for AWS deployment)
S3_BUCKET=
S3_REGION=us-east-1
S3_PREFIX=whatsapp-rag/

# Database Configuration (optional)
DATABASE_URL=
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# =============================================================================
# RAG SYSTEM CONFIGURATION
# =============================================================================

# Embedding Model
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
EMBEDDING_DEVICE=cpu

# Text Processing
CHUNK_SIZE=800
CHUNK_OVERLAP=150
MAX_CONTEXT_LENGTH=4000

# Retrieval
DEFAULT_TOP_K=5
SIMILARITY_THRESHOLD=0.7
USE_MMR_BY_DEFAULT=true
MMR_LAMBDA=0.6
DEFAULT_FETCH_K=20

# Vector Store
VECTOR_STORE_TYPE=faiss
INDEX_TYPE=IndexFlatIP

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Data Privacy
ANONYMIZE_USERS=true
ANONYMIZE_PHONE_NUMBERS=true
FILTER_SENSITIVE_INFO=true
REDACT_PHONE_NUMBERS=true
REDACT_EMAILS=true

# Content Filtering
ENABLE_CONTENT_FILTER=true
MAX_MESSAGE_LENGTH=10000

# SSL/TLS (for production deployments)
SSL_CERT_PATH=
SSL_KEY_PATH=
SSL_VERIFY=true

# Session Configuration
SESSION_TIMEOUT=3600
SESSION_CLEANUP_INTERVAL=300

# =============================================================================
# ALERTING AND NOTIFICATIONS
# =============================================================================

# Error Alerting
ALERT_ON_ERRORS=true
ALERT_THRESHOLD_ERROR_RATE=0.05
ALERT_EMAIL=
ALERT_SLACK_WEBHOOK=

# Performance Alerting
ALERT_ON_HIGH_LATENCY=true
ALERT_LATENCY_THRESHOLD=5.0
ALERT_ON_HIGH_MEMORY=true
ALERT_MEMORY_THRESHOLD=0.8

# =============================================================================
# DEPLOYMENT SPECIFIC
# =============================================================================

# Environment
ENVIRONMENT=production
DEPLOYMENT_TYPE=production

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Graceful Shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=30

# Worker Configuration
WORKER_TIMEOUT=300
WORKER_KEEP_ALIVE=2

# =============================================================================
# OPTIONAL INTEGRATIONS
# =============================================================================

# Sentry for Error Tracking
SENTRY_DSN=

# New Relic for APM
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=WhatsApp-RAG-Production

# DataDog
DATADOG_API_KEY=
DATADOG_APP_KEY=
DATADOG_SERVICE_NAME=whatsapp-rag

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Backup Configuration
ENABLE_BACKUPS=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=

# =============================================================================
# DEVELOPMENT OVERRIDES (leave empty for production)
# =============================================================================

# These should be empty in production
GRADIO_RELOAD=
DEBUG=
TESTING=

# =============================================================================
# NOTES
# =============================================================================

# 1. Replace all placeholder values with actual production values
# 2. Store sensitive values in a secure secret management system
# 3. Rotate API keys and passwords regularly
# 4. Enable monitoring and alerting for production systems
# 5. Test configuration in staging environment first
# 6. Keep this file secure and do not commit to version control